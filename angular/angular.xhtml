<?xml version="1.0" encoding="utf-8" ?>
<!--
File: angular.xhtml

Description: Demo of using AngularJS framework in a UI Page

Usage:

- Create a new UI Page named 'angular'.
- Copy the contents of angular.xhtml (this file) into the HTML field.
- Copy the contents of angular.client.js into the Client script field.
- Browse to https://<instance name>.service-now.com/angular.do
-->
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>

    <div ng-app="" ng-controller="IncidentCtrl">
        <form>
            <h2>Create a New Incident</h2>
            <label>Short Description
                <input type="text" ng-model="new_incident.short_description"/>
            </label>
            <label>Priority
                <select ng-model="new_incident.priority" ng-options="o for o in priority_options">
                </select>
            </label>
            <button ng-click="create()">Create</button>
        </form>
        <hr/>
        <h2>Existing Incidents</h2>
        <table class="ng-cloak">
            <thead>
            <tr>
                <th style="width:50px"></th>
                <th>Number</th>
                <th>Short Description</th>
                <th>Priority</th>
                <th>State</th>
            </tr>
            </thead>
            <tbody ng-show="incidents.length > 0">
            <tr ng-repeat="incident in incidents">
                <td>{{incident.number}}</td>
                <td>
                    <input style="width:500px" type="text" ng-model="incident.short_description"/>
                </td>
                <td>{{incident.priority}}</td>
                <td>{{incident.state}}</td>
                <td>
                    <button ng-click="update(incident)">Save</button>
                    <button ng-click="remove(incident)">Delete</button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

</j:jelly>
